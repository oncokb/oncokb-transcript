

enum ReferenceGenome {
 GRCh37, GRCh38
}

entity Transcript {
    ensemblTranscriptId String,
    canonical Boolean required,
    ensemblProteinId String,
    referenceSequenceId String,
    description String
}

enum TranscriptFlagEnum {
	 MANE_SELECT,
	 MANE_PLUS_CLINICAL,
	 GN_CANONICAL,
	 ONCOKB,
	 ENSEMBL_CANONICAL
}

entity SeqRegion {
    name String required unique,
    chromosome String,
    description TextBlob
}

entity EnsemblGene {
    referenceGenome ReferenceGenome,
    ensemblGeneId String required,
    canonical Boolean required,
    start Integer required,
    end Integer required,
    strand Integer required
}

entity GenomeFragment {
    start Integer,
    end Integer,
    strand Integer,
    type GenomeFragmentType
}

enum GenomeFragmentType {
	GENE,
	EXON,
    FIVE_PRIME_UTR,
    THREE_PRIME_UTR
}

entity Sequence {
    sequenceType SequenceType
    sequence TextBlob
}

enum SequenceType {
	PROTEIN, CDNA
}

entity Drug {
    name TextBlob
    code String
    semanticType TextBlob
}

entity FdaDrug {
    applicationNumber String unique required
}

entity DrugSynonym {
    name TextBlob
}

entity Info {
    type String unique required
    value String
    created Instant
    lastUpdated Instant
}

enum InfoType {
    NCIT_VERSION,
    GENE_VERSION,
    ONCOKB_TRANSCRIPT_VERSION,
    MANE_TRANSCRIPT_VERSION,
    ENSEMBL_VERSION
}

entity Article {
    pmid String,
    title TextBlob,
    journal String,
    pubDate String,
    volume String,
    issue String,
    pages String,
    authors String,
}

entity Gene {
    entrezGeneId Integer
    hugoSymbol String
    hgncId String
}

entity GeneAlias {
    name String
}

enum GeneFlagEnum {
	 ONCOKB,
	 MSK_IMPACT_505,
	 MSK_ACCESS,
	 MSK_HEME,
	 VOGELSTEIN,
	 CGC_T1,
	 FOUNDATION_ONE,
	 FOUNDATION_HEME,
	 TEMPUS_XT,
	 TEMPUS_XR,
	 TEMPUS_XF,
	 TEMPUS_XG,
	 TEMPUS_XG_PLUS,
	 TEMPUS_XE,
	 GUARDANT_360,
	 ONCOMINE_DX
	 ONCOMINE_CA_V3
	 ONCOMINE_CA_PLUS
	 CARIS_MI
	 TRUSIGHT_ONCOLOGY_500
}

enum FlagType {
    GENE,
    TRANSCRIPT
}

entity Flag {
    type String required,
    flag String required,
    name String required,
    description TextBlob required
}

entity SpecimenType{
	type String required
    name String required
}

entity CompanionDiagnosticDevice {
	name String required
    manufacturer String required
    indicationDetails String
    platformType String
    lastUpdated Instant
}

enum FdaSubmissionTypeKey {
	PMA, DE_NOVO, HDE, PMN
}

entity FdaSubmissionType {
	type FdaSubmissionTypeKey required
    name String required
    shortName String
    description TextBlob
}

entity FdaSubmission {
    number String required
    supplementNumber String

	deviceName String required
    genericName String

    dateReceived Instant
    decisionDate Instant

    description TextBlob
    platform String

    curated Boolean required
    genetic Boolean required

    additionalInfo TextBlob
}

enum TumorForm {
	SOLID, LIQUID, MIXED
}

enum AlterationType {
	MUTATION,
    COPY_NUMBER_ALTERATION,
    STRUCTURAL_VARIANT,
    UNKNOWN,
    NA
}

enum CopyNumberAlterationType {
	AMPLIFICATION,
    DELETION,
    GAIN,
    LOSS
}

enum StructuralVariantType {
	FUSION
}

entity Consequence {
	type AlterationType required
	term String required
    name String required
    isGenerallyTruncating Boolean required
    description String
}

entity Alteration {
    name String required
    alteration String required
    proteinStart Integer
    proteinEnd Integer
    refResidues String
    variantResidues String
}

entity AlterationReferenceGenome {
    referenceGenome ReferenceGenome
}

enum CategoricalAlterationType{
	ONCOGENIC_MUTATIONS,
    GAIN_OF_FUNCTION_MUTATIONS,
    LOSS_OF_FUNCTION_MUTATIONS,
    SWITCH_OF_FUNCTION_MUTATIONS,
    VUS,
	TRUNCATING_MUTATIONS,
	FUSIONS,
	AMPLIFICATION,
	DELETION,
    PROMOTER,
    WILDTYPE
}

entity CategoricalAlteration {
	name String required
	type CategoricalAlterationType required
    alterationType AlterationType required
}

entity CancerType {
	code String
    color String
    level Integer required
    mainType String required
    subtype String
    tissue String
    tumorForm TumorForm required
}

enum GeographicRegion {
	US, EU
}

entity DrugBrand {
	name String
    region GeographicRegion
}

entity BiomarkerAssociation {
}

entity ClinicalTrialsGovCondition {
	name String unique required
}

relationship OneToOne {
  Drug{fdaDrug} to FdaDrug{drug}
}

relationship OneToMany {
	Drug{synonyms} to DrugSynonym
	Gene to GeneAlias
	Gene to EnsemblGene
	SeqRegion to EnsemblGene {seqRegion(name)}
	SeqRegion to GenomeFragment {seqRegion(name)}
    CancerType{children} to CancerType {parent}
    Transcript{fragments} to GenomeFragment{transcript}
    EnsemblGene to Transcript
    Transcript to Sequence
    CompanionDiagnosticDevice to FdaSubmission
    Consequence to Alteration
    FdaSubmissionType to FdaSubmission{type}
	Alteration{referenceGenomes} to AlterationReferenceGenome
	CancerType to BiomarkerAssociation
    Gene to BiomarkerAssociation
    Drug{brands} to DrugBrand
}

relationship ManyToMany {
    Alteration to Gene
    CompanionDiagnosticDevice to SpecimenType
    ClinicalTrialsGovCondition to CancerType
    BiomarkerAssociation to Alteration
    BiomarkerAssociation to Drug
    BiomarkerAssociation to FdaSubmission
    Transcript to Flag
    Gene to Flag
}

paginate Gene, EnsemblGene, Alteration, CancerType, Transcript, Sequence, GenomeFragment, Article, Drug, FdaDrug, ClinicalTrialsGovCondition, FdaSubmission, Flag with pagination

service * with serviceClass
filter Alteration, Gene, Article, Drug, CompanionDiagnosticDevice, FdaSubmission, ClinicalTrialsGovCondition, CancerType, EnsemblGene, Transcript, Flag
dto Transcript with mapstruct
