import { GENE_TYPE } from 'app/config/constants/firebase';
import {
  createMockCancerRisk,
  createMockCancerType,
  createMockComment,
  createMockGene,
  createMockGeneType,
  createMockImplication,
  createMockMutation,
  createMockMutationEffect,
  createMockMutationSpecificInheritanceMechanism,
  createMockMutationSpecificPenetrance,
  createMockReview,
  createMockTi,
  createMockTreatment,
  createMockTumor,
  createMockVus,
  createMockVusTime,
  createMockVusBy,
} from '../core-submission-shared/core-submission.mocks';
import { DrugCollection, FDA_LEVELS, FIREBASE_ONCOGENICITY, TI_TYPE, TX_LEVELS, Vus } from 'app/shared/model/firebase/firebase.model';
import { getGeneData, getVUSData } from './core-drive-annotation-submission';
import { MUTATION_EFFECT } from 'app/config/constants/constants';
import { generateUuid } from '../utils';

describe('Drive annotation to submit to core', () => {
  describe('getGeneData', () => {
    test('include only reviewed content', () => {
      const geneData = getGeneData(mockGene, mockDrugList);
      expect(geneData).toEqual(expectedGeneDataNoCommentsAndReviewed);
    });
  });
  describe('getVusData', () => {
    test('exclude comments', () => {
      const vusData = getVUSData(mockVus);
      const expectedVusData = [
        { name: 'F888I', time: { by: { email: 'doej@gmail.com', name: 'John Doe' }, value: 1680011347000 } },
        { name: 'F595I', time: { by: { email: 'doej@gmail.com', name: 'John Doe' }, value: 1680011347329 } },
      ];
      expect(vusData).toEqual(expectedVusData);
    });
  });
});

const mockVus: Vus[] = [
  createMockVus({
    name: 'F888I',
    name_comments: {
      [generateUuid()]: createMockComment({
        userName: 'doej',
        content: 'comment',
        date: '1720646502304',
      }),
    },
    time: createMockVusTime({
      by: createMockVusBy({
        name: 'John Doe',
        email: 'doej@gmail.com',
      }),
      value: 1680011347000,
    }),
  }),
  createMockVus({
    name: 'F595I',
    name_comments: {
      [generateUuid()]: createMockComment({
        userName: 'doej',
        content: 'comment',
        date: '1720646502305',
      }),
    },
    time: createMockVusTime({
      by: createMockVusBy({
        name: 'John Doe',
        email: 'doej@gmail.com',
      }),
      value: 1680011347329,
    }),
  }),
];

const mockGene = createMockGene({
  background: 'BRAF background',
  background_review: createMockReview({
    updateTime: 1717770480000,
    updatedBy: 'John Doe',
    lastReviewed: 'test',
  }),
  background_uuid: '16acb0f4-a01c-472e-b243-01560f92cf1e',
  dmp_refseq_id: 'NM_000000.0',
  dmp_refseq_id_grch38: 'NM_000000.0',
  isoform_override: 'ENST00000000000',
  isoform_override_grch38: 'ENST00000000000',
  penetrance_uuid: 'fc7ae593-7075-42de-b90f-ee132238274b',
  name: 'BRAF',
  summary: 'BRAF Summary',
  summary_review: createMockReview({
    updateTime: 1717770480000,
    updatedBy: 'John Doe',
    lastReviewed: 'test',
  }),
  summary_uuid: '616d02ba-6909-42b2-b145-f7b5627ad0a3',
  type_uuid: 'ea4d7bd1-bc94-4877-987f-37f2f13e571b',
  inheritanceMechanism_uuid: '99447f53-5908-4dd1-a6fd-732d5ccf0f62',
  type: createMockGeneType({
    ocg_uuid: '1a233927-54d7-4921-97bf-08489a1e9c7d',
    ocg: GENE_TYPE.ONCOGENE,
    ocg_review: createMockReview({
      updateTime: 1717770480000,
      updatedBy: 'John Doe',
      lastReviewed: GENE_TYPE.TUMOR_SUPPRESSOR,
    }),
    tsg_uuid: 'aafdb835-106b-426a-89dc-970f49f7eee6',
    tsg: GENE_TYPE.TUMOR_SUPPRESSOR,
    tsg_review: createMockReview({
      updateTime: 1717770480000,
      updatedBy: 'John Doe',
      lastReviewed: GENE_TYPE.ONCOGENE,
    }),
    insufficient_evidence: '',
    insufficient_evidence_uuid: '76b1f763-5121-4283-adb1-78104fc74cf3',
    neither: '',
    neither_uuid: '6991a199-30bf-4cad-99b1-acbd4d795aa6',
  }),
  mutations_uuid: '69e454db-db99-4979-a770-482f7937314b',
  mutations: {
    '-mKey1': createMockMutation({
      tumors_uuid: '8ba291c7-6565-45e8-9dfa-a185657886cc',
      alterations_uuid: '145c01a5-ac80-4bdd-9169-e51da638b5f8',
      mutation_effect: createMockMutationEffect({
        pathogenic_uuid: '23d48fd8-2b0f-4530-b5d9-aadf4ffd9325',
        description: 'The class II BRAF',
        description_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
          lastReviewed: 'reviewed description',
        }),
        description_uuid: '5ac487cc-8f37-4542-a59c-7aaa31cde0fb',
        effect: MUTATION_EFFECT.LIKELY_GAIN_OF_FUNCTION,
        effect_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
          lastReviewed: MUTATION_EFFECT.NEUTRAL,
        }),
        effect_uuid: '21371d1e-d93d-492d-b791-616714bcb3c3',
        oncogenic: FIREBASE_ONCOGENICITY.LIKELY,
        oncogenic_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
          lastReviewed: FIREBASE_ONCOGENICITY.YES,
        }),
        oncogenic_uuid: '78d4f998-b73e-4535-9bb9-68cb72cf08cc',
        short: '',
      }),
      mutation_effect_uuid: '77b1b627-a015-4d0c-8fda-b3eb1fc1ff2a',
      name: 'L597S',
      name_review: createMockReview({
        updateTime: 1678309000000,
        updatedBy: 'John Doe',
        added: true,
      }),
      mutation_specific_cancer_risk: createMockCancerRisk({
        biallelic_uuid: 'aa3609a2-378f-4ff5-98f8-e57a032d56da',
        mosaic_uuid: '50a2a7e4-58ee-4f96-8ad4-f431d2f1efa8',
        monoallelic_uuid: '29a8eed7-0d6b-48d5-8e20-d73fc2c639f1',
      }),
      mutation_specific_inheritance_mechanism: createMockMutationSpecificInheritanceMechanism({
        description_uuid: '28f7e918-6c1b-45f5-accd-9cb6a7eb6149',
        inheritanceMechanism_uuid: '59b3e3f9-5339-4bd1-8cc3-d97ca0c2509f',
      }),
      mutation_specific_penetrance: createMockMutationSpecificPenetrance({
        description_uuid: '531dc775-3c64-4605-9830-e00c92401f64',
        penetrance_uuid: '494467d4-5d02-4bac-b654-ab7f7a88138d',
      }),
      name_uuid: 'b01b580f-d159-4c40-bf75-3c03704c2b3b',
    }),
    '-mKey2': createMockMutation({
      tumors_uuid: '9672ea70-bde8-4149-80a5-d1983932b89b',
      alterations_uuid: '724b958c-57c5-40e8-b330-ab0d25539a49',
      mutation_effect: createMockMutationEffect({
        pathogenic_uuid: '11de51b2-1019-4ff7-95d0-9bcfe3439d2b',
        description: 'The class II BRAF',
        description_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
          lastReviewed: 'reviewed description',
        }),
        description_uuid: 'b020228d-8bbf-4d1f-842f-dda76b4e6630',
        effect: MUTATION_EFFECT.LIKELY_GAIN_OF_FUNCTION,
        effect_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
          lastReviewed: MUTATION_EFFECT.NEUTRAL,
        }),
        effect_uuid: 'bd08e589-0a0b-4ff9-b514-fe3fe1d84f30',
        oncogenic: FIREBASE_ONCOGENICITY.LIKELY,
        oncogenic_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
          lastReviewed: FIREBASE_ONCOGENICITY.YES,
        }),
        oncogenic_uuid: 'f48ceb40-9fac-4681-90d7-163ed51dd6e2',
        short: '',
      }),
      mutation_effect_uuid: 'f5646eb4-a8b2-4967-9f8e-fba706538a03',
      name: 'L597S',
      name_review: createMockReview({
        updateTime: 1678309000000,
        updatedBy: 'John Doe',
        lastReviewed: 'reviewed name',
      }),
      mutation_specific_cancer_risk: createMockCancerRisk({
        biallelic_uuid: '763e8668-8db3-4092-a8fb-f2a71009127f',
        mosaic_uuid: 'c7c43f59-45d6-4b07-91d1-f2595ff9f90a',
        monoallelic_uuid: '3358cb78-3a48-41c0-a879-71611cd4dbad',
      }),
      mutation_specific_inheritance_mechanism: createMockMutationSpecificInheritanceMechanism({
        description_uuid: '59a97f8e-7fb9-4229-b08d-ed29347d8f22',
        inheritanceMechanism_uuid: '635bcf72-cdc3-4ffd-97db-3e60b847def7',
      }),
      mutation_specific_penetrance: createMockMutationSpecificPenetrance({
        description_uuid: '4efb278a-8da4-4c4d-abd1-5f2bd463010c',
        penetrance_uuid: 'd4d542a7-c942-47b6-bb44-4559fa742348',
      }),
      name_uuid: '90061776-866f-40c1-819a-00dbad8213d0',
      summary: 'summary',
      summary_uuid: 'dec9f8ee-7c5d-4740-b17c-86331d867b15',
    }),
    '-mKey3': createMockMutation({
      mutation_effect: createMockMutationEffect({
        description: 'The class I',
        description_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
        description_uuid: '84e58cf7-a4f0-4cd5-ac01-d8397526d0e7',
        effect: MUTATION_EFFECT.GAIN_OF_FUNCTION,
        effect_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
        }),
        effect_uuid: 'eea2c0e6-d8b0-4536-8df7-297ce756494c',
        oncogenic: FIREBASE_ONCOGENICITY.YES,
        oncogenic_review: createMockReview({
          updateTime: 1678309000000,
          updatedBy: 'John Doe',
        }),
        oncogenic_uuid: 'f2dad6ab-f54c-4252-8d35-54116866d05c',
        pathogenic_uuid: '688ebc31-f528-4f09-ae3d-ce5b935951ab',
        short: '',
      }),
      mutation_effect_uuid: '3ef57442-f50e-4305-adc6-22fbce9a532d',
      name: 'V600E',
      name_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
      name_uuid: 'ee5900b8-d984-49a6-b6db-940eb1d0e807',
      summary: 'summary',
      summary_uuid: '8cbccd95-caf6-4a33-837d-5c72d1d221d7',
      tumors_uuid: 'b9e062b0-a1ae-46ad-9fc6-5bb6ee6b3674',
      alterations: [],
      alterations_uuid: '9eb7261b-74c8-463b-99cd-62815c416765',
      mutation_specific_cancer_risk: createMockCancerRisk({
        biallelic_uuid: 'a0cf2c62-9e86-4cc6-accf-7d4b6dbc5fbc',
        mosaic_uuid: '72e419cb-0d5e-4533-83cc-14c08df2a869',
        monoallelic_uuid: '3d379ae4-eea1-47ba-a12c-b3f4cae4f78a',
      }),
      mutation_specific_inheritance_mechanism: createMockMutationSpecificInheritanceMechanism({
        description_uuid: '317a7a9e-b50f-4558-aadd-6a7a184e0f0b',
        inheritanceMechanism_uuid: '65c4e130-703e-46b5-85a5-5bf751d630c1',
      }),
      mutation_specific_penetrance: createMockMutationSpecificPenetrance({
        description_uuid: 'b0a9729d-82b6-4f3a-ae5f-81a42c004f2f',
        penetrance_uuid: '91308253-0677-44db-bf89-97d79d7ec98a',
      }),
      tumors: {
        '-tKey1': createMockTumor({
          cancerTypes: {},
          cancerTypes_review: createMockReview({
            added: true,
            updateTime: 1717770480000,
            updatedBy: 'John Doe',
          }),
          TIs: [],
          diagnostic: createMockImplication({
            description: '',
            description_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'description review',
            }),
            description_uuid: '5c0856a1-1a56-4f01-8620-9518ebfb233e',
            level: '',
            level_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'level review',
            }),
            level_uuid: '7afcbe32-1684-436e-b659-c37ada75bae2',
            short: '',
            excludedRCTs_uuid: '4a5ed610-72d6-4007-b68b-3913d9c01d38',
            excludedRCTs_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
            }),
          }),
          prognostic: {
            description: '',
            description_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'description review',
            }),
            description_uuid: 'b190d68a-bd23-47e8-a7e7-b67f91c946dd',
            level: '',
            level_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'level review',
            }),
            level_uuid: 'b12042a4-76c5-4029-97de-9722108b7b0e',
            short: '',
            excludedRCTs_uuid: '1cf4d012-1335-4229-8da1-76ced0819211',
            excludedRCTs_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
            }),
          },
          prognosticSummary: '',
          prognosticSummary_review: createMockReview({
            updateTime: 1717770480000,
            updatedBy: 'John Doe',
            lastReviewed: 'summary review',
          }),
          prognosticSummary_uuid: 'c961a5e9-8c02-4b32-b001-9fc37f6c60c8',
          prognostic_uuid: 'a482d71c-0079-40bd-8d8b-a13d35e26fe3',
          summary: 'Add cancer type test',
          summary_review: createMockReview({
            updateTime: 1717770480000,
            updatedBy: 'John Doe',
            lastReviewed: 'summary review',
          }),
          summary_uuid: 'da67dbc0-7641-43db-a760-a3464e65a1c5',
          diagnosticSummary_uuid: 'a601e863-3c0f-4c97-8037-b3aafd853aad',
          diagnostic_uuid: 'c3d5a2d6-34ef-4645-9d8e-96739e4a3cd6',
          cancerTypes_uuid: '553284ea-01f2-48c4-936c-2efae797d6f5',
          excludedCancerTypes_uuid: '2b0384c4-5405-4478-bba8-0604bd0ef1b6',
        }),
        '-tKey2': createMockTumor({
          TIs: [
            createMockTi({
              name: 'Standard implications for sensitivity to therapy',
              name_uuid: 'b728d209-492b-41cd-aaa5-a16c61a770ed',
              treatments_uuid: '6f8ed079-3b8b-437c-852c-c3c2a3c9a320',
              treatments: {
                '-txKey1': createMockTreatment({
                  description: 'RAF inhibitor',
                  description_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
                  description_uuid: 'd9c0bb27-9c2e-441a-abf3-9f0784943e1f',
                  fdaLevel: FDA_LEVELS.LEVEL_FDA2,
                  fdaLevel_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
                  fdaLevel_uuid: '3cc835a2-523a-44ef-b703-2d9566c65717',
                  indication: 'FDA-approved',
                  indication_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
                  indication_uuid: '6e5d7e6b-9fa6-442c-822b-863942e3ad34',
                  level: TX_LEVELS.LEVEL_1,
                  level_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
                  level_uuid: '16d4d15a-d753-482c-ac56-74e9bd238ed1',
                  name: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de + 001e534f-3e63-432f-90a6-d1af1759e4e2, 122b8921-3cd6-4b57-bdc8-5d39cc5465a1',
                  name_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
                  name_uuid: '9b798839-592a-4cb0-a85a-099c2662c8ef',
                  propagation: TX_LEVELS.LEVEL_3B,
                  propagationLiquid: TX_LEVELS.LEVEL_NO,
                  propagationLiquid_uuid: '6f1085c4-98b6-4d91-a210-b9f078849bbf',
                  propagation_review: createMockReview({ updateTime: 1717770480000, updatedBy: 'John Doe' }),
                  propagation_uuid: 'be009470-ca82-47d3-9054-8b54701030cc',
                  short: 'Effective against brain metastases',
                  excludedRCTs_uuid: '4fc7b249-8ae1-49d4-864e-4fdf971e1a6c',
                }),
                '-txKey2': createMockTreatment({
                  description: 'Created test',
                  description_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'description review',
                  }),
                  description_uuid: '9f382ed6-237b-4c22-b772-0f67ed2f6bed',
                  fdaLevel: FDA_LEVELS.LEVEL_FDA2,
                  fdaLevel_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'fdaLevel review',
                  }),
                  fdaLevel_uuid: '0c32548e-4cee-48e5-b6c6-a438948c10bd',
                  indication: 'FDA-approved',
                  indication_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'indication Review',
                  }),
                  indication_uuid: 'bb2b3791-65c1-4b62-ac33-e64a5ee2af41',
                  level: TX_LEVELS.LEVEL_1,
                  level_uuid: '89948c0d-dba8-4393-b896-c30988cf817d',
                  level_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'level Review',
                  }),
                  name: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de',
                  name_review: createMockReview({
                    added: true,
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                  }),
                  name_uuid: '88acdec9-fd1b-4522-9c4c-b95c6ce9ae8a',
                  propagation: TX_LEVELS.LEVEL_1,
                  propagation_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                  }),
                  propagationLiquid: TX_LEVELS.LEVEL_NO,
                  propagationLiquid_uuid: '09226040-8d58-47b9-aa69-dc1003694b33',
                  propagation_uuid: 'a500184d-f49d-4444-9da8-703b0ac474f3',
                  short: '',
                  excludedRCTs_uuid: '9ba9e897-8476-4304-af8a-a3289ee96052',
                }),
                '-txKey3': createMockTreatment({
                  description: 'inhibitor of V600-mutant BRAF',
                  description_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'description review',
                  }),
                  description_uuid: '45a0d045-43fd-47db-a0a9-1a86d65799c3',
                  fdaLevel: FDA_LEVELS.LEVEL_FDA2,
                  fdaLevel_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'fdaLevel review',
                  }),
                  fdaLevel_uuid: 'b05a26bf-c45a-4541-8007-197ecc2403a5',
                  indication: 'FDA-approved',
                  indication_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'indication Review',
                  }),
                  indication_uuid: '494cda87-150c-47e9-980c-6ce6409e0ed7',
                  level: TX_LEVELS.LEVEL_1,
                  level_uuid: '8876d3de-9e1,e-4d76-9909-3d6f1c30650c',
                  level_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: 'level Review',
                  }),
                  name: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de, 122b8921-3cd6-4b57-bdc8-5d39cc5465a1',
                  name_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de, 122b8921-3cd6-4b57-bdc8-5d39cc5465a1',
                  }),
                  name_uuid: '71cc9b4d-a636-4891-8d5d-56093a701280',
                  propagation: TX_LEVELS.LEVEL_3B,
                  propagation_review: createMockReview({
                    updateTime: 1717770480000,
                    updatedBy: 'John Doe',
                    lastReviewed: TX_LEVELS.LEVEL_1,
                  }),
                  propagationLiquid: TX_LEVELS.LEVEL_NO,
                  propagationLiquid_uuid: '288e2f8e-2dd4-4771-ba8e-c63589640559',
                  propagation_uuid: '317bd394-7991-499e-a6a7-bcd415f821f6',
                  short: '',
                  excludedRCTs_uuid: '3a04990a-9b1f-4ceb-8896-4fd88ea2a02b',
                }),
              },
              type: TI_TYPE.SS,
            }),
            createMockTi({
              name: 'Standard implications for resistance to therapy',
              name_uuid: '389ba0a6-26d4-4754-aa0f-190d4f72b177',
              type: TI_TYPE.SR,
              treatments_uuid: 'bc650bb2-65e7-4ca9-9b04-bc7961d8b135',
            }),
            createMockTi({
              name: 'Investigational implications for sensitivity to therapy',
              name_uuid: '11d78588-9550-488a-a850-dd91e8614048',
              type: TI_TYPE.IS,
              treatments_uuid: '92b55ca1-8ef8-44d7-aa90-f10e6c1f7bb0',
            }),
            createMockTi({
              name: 'Investigational implications for resistance to therapy',
              name_uuid: '748852c0-a8ec-4824-af73-aa698bb5ff2f',
              type: TI_TYPE.IR,
              treatments_uuid: '52878ba2-b2ba-4f20-b357-f8d5ac1eda2e',
            }),
          ],
          cancerTypes: {
            '-ctKey1': createMockCancerType({
              code: 'MEL',
              mainType: 'Melanoma',
              subtype: 'Melanoma',
            }),
          },
          cancerTypes_uuid: '553284ea-01f2-48c4-936c-2efae797d6f5',
          diagnostic: createMockImplication({
            description: '',
            description_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'description review',
            }),
            description_uuid: '5c0856a1-1a56-4f01-8620-9518ebfb233e',
            level: '',
            level_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'level review',
            }),
            level_uuid: '7afcbe32-1684-436e-b659-c37ada75bae2',
            short: '',
            excludedRCTs: {},
            excludedRCTs_uuid: '4a5ed610-72d6-4007-b68b-3913d9c01d38',
            excludedRCTs_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
            }),
          }),
          diagnosticSummary: '',
          diagnosticSummary_review: createMockReview({
            updateTime: 1717770480000,
            updatedBy: 'John Doe',
            lastReviewed: 'summary review',
          }),
          diagnosticSummary_uuid: 'a601e863-3c0f-4c97-8037-b3aafd853aad',
          diagnostic_uuid: 'c3d5a2d6-34ef-4645-9d8e-96739e4a3cd6',
          excludedCancerTypes_uuid: '2b0384c4-5405-4478-bba8-0604bd0ef1b6',
          prognostic: {
            description: '',
            description_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'description review',
            }),
            description_uuid: 'b190d68a-bd23-47e8-a7e7-b67f91c946dd',
            excludedRCTs: {},
            level: '',
            level_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'level review',
            }),
            level_uuid: 'b12042a4-76c5-4029-97de-9722108b7b0e',
            short: '',
            excludedRCTs_uuid: '1cf4d012-1335-4229-8da1-76ced0819211',
            excludedRCTs_review: createMockReview({
              updateTime: 1717770480000,
              updatedBy: 'John Doe',
              lastReviewed: 'reviewed excludedRCTs',
            }),
          },
          prognosticSummary: '',
          prognosticSummary_review: createMockReview({
            updateTime: 1717770480000,
            updatedBy: 'John Doe',
            lastReviewed: 'summary review',
          }),
          prognosticSummary_uuid: 'c961a5e9-8c02-4b32-b001-9fc37f6c60c8',
          prognostic_uuid: 'a482d71c-0079-40bd-8d8b-a13d35e26fe3',
          summary: 'RAF-targeted inhibitors',
          summary_review: createMockReview({
            updateTime: 1717770480000,
            updatedBy: 'John Doe',
            lastReviewed: 'summary review',
          }),
          summary_uuid: 'da67dbc0-7641-43db-a760-a3464e65a1c5',
        }),
      },
    }),
  },
});

const mockDrugList: DrugCollection = {
  '001e534f-3e63-432f-90a6-d1af1759e4e2': {
    description: '',
    drugName: 'Encorafenib',
    ncitCode: 'C98283',
    ncitName: 'Encorafenib',
    synonyms: ['LGX-818', 'LGX818', 'LGX 818', 'ENCORAFENIB', 'Braftovi'],
    uuid: '001e534f-3e63-432f-90a6-d1af1759e4e2',
    priority: 1,
  },
  '0746dd92-8f4d-4bf7-9161-57a223cb67d5': {
    description: '',
    drugName: 'Pembrolizumab',
    ncitCode: 'C106432',
    ncitName: 'Pembrolizumab',
    synonyms: [
      'MK-3475',
      'PEMBROLIZUMAB',
      'Keytruda',
      'Lambrolizumab',
      'SCH 900475',
      'Immunoglobulin G4, Anti-(Human Programmed Cell Death 1); Humanized Mouse Monoclonal (228-L-proline(H10-S&gt;P))gamma 4 Heavy Chain (134-218&apos;)-disulfide with Humanized Mouse Monoclonal Kappa Light Chain Dimer (226-226&apos;&apos;:229-229&apos;&apos;)-bisdisulfide',
    ],
    uuid: '0746dd92-8f4d-4bf7-9161-57a223cb67d5',
    priority: 1,
  },
  '0ade496c-77e6-45cd-8e96-7c7d87b4e5de': {
    description: '',
    drugName: 'MDM2 Antagonist RO5045337',
    ncitCode: 'C91724',
    ncitName: 'MDM2 Antagonist RO5045337',
    synonyms: ['R7112', 'RO-5045337', 'RO5045337'],
    uuid: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de',
    priority: 1,
  },
  '0f991d49-4cf2-4975-b52f-d7d037aa7f11': {
    description: '',
    drugName: 'Nilotinib',
    ncitCode: 'C48375',
    ncitName: 'Nilotinib',
    synonyms: [
      'AMN 107 Base Form',
      'nilotinib',
      '4-Methyl-3-((4-(3-pyridinyl)-2-pyrimidinyl)amino)-N-(5-(4-methyl-1H-imidazol-1-yl)-3-(trifluoromethyl)phenyl)benzamide',
      'NILOTINIB',
    ],
    uuid: '0f991d49-4cf2-4975-b52f-d7d037aa7f11',
    priority: 1,
  },
  '122b8921-3cd6-4b57-bdc8-5d39cc5465a1': {
    description: '',
    drugName: 'Ponatinib',
    ncitCode: 'C95777',
    ncitName: 'Ponatinib',
    synonyms: [
      'PONATINIB',
      'AP-24534',
      'AP24534',
      'Benzamide, 3-(2-Imidazo(1,2-B)Pyridazin-3-Ylethynyl)-4-Methyl-N-(4-((4-Methyl-1- Piperazinyl)Methyl)-3-(Trifluoromethyl)Phenyl)',
    ],
    uuid: '122b8921-3cd6-4b57-bdc8-5d39cc5465a1',
    priority: 1,
  },
};

const expectedGeneDataNoCommentsAndReviewed = {
  name: 'BRAF',
  name_comments: [],
  background: 'test',
  background_uuid: '16acb0f4-a01c-472e-b243-01560f92cf1e',
  dmp_refseq_id: 'NM_000000.0',
  isoform_override: 'ENST00000000000',
  mutations: [
    {
      mutation_effect: {
        description: 'reviewed description',
        description_uuid: 'b020228d-8bbf-4d1f-842f-dda76b4e6630',
        effect: 'Neutral',
        effect_uuid: 'bd08e589-0a0b-4ff9-b514-fe3fe1d84f30',
        oncogenic: 'Yes',
        oncogenic_uuid: 'f48ceb40-9fac-4681-90d7-163ed51dd6e2',
        short: '',
        pathogenic: '',
        pathogenic_uuid: '11de51b2-1019-4ff7-95d0-9bcfe3439d2b',
        description_review: { updatedBy: 'John Doe', updateTime: 1678309000000 },
        effect_review: { updatedBy: 'John Doe', updateTime: 1678309000000 },
        oncogenic_review: { updatedBy: 'John Doe', updateTime: 1678309000000 },
      },
      mutation_effect_uuid: 'f5646eb4-a8b2-4967-9f8e-fba706538a03',
      mutation_effect_comments: [],
      name: 'reviewed name',
      alterations: [],
      alterations_uuid: '724b958c-57c5-40e8-b330-ab0d25539a49',
      name_uuid: '90061776-866f-40c1-819a-00dbad8213d0',
      tumors: [],
      tumors_uuid: '9672ea70-bde8-4149-80a5-d1983932b89b',
      mutation_specific_penetrance: {
        penetrance: '',
        penetrance_uuid: 'd4d542a7-c942-47b6-bb44-4559fa742348',
        description: '',
        description_uuid: '4efb278a-8da4-4c4d-abd1-5f2bd463010c',
      },
      mutation_specific_inheritance_mechanism: {
        inheritanceMechanism: '',
        inheritanceMechanism_uuid: '635bcf72-cdc3-4ffd-97db-3e60b847def7',
        description: '',
        description_uuid: '59a97f8e-7fb9-4229-b08d-ed29347d8f22',
      },
      mutation_specific_cancer_risk: {
        monoallelic: '',
        monoallelic_uuid: '3358cb78-3a48-41c0-a879-71611cd4dbad',
        biallelic: '',
        biallelic_uuid: '763e8668-8db3-4092-a8fb-f2a71009127f',
        mosaic: '',
        mosaic_uuid: 'c7c43f59-45d6-4b07-91d1-f2595ff9f90a',
      },
      name_review: { updatedBy: 'John Doe', updateTime: 1678309000000 },
      summary: 'summary',
      summary_uuid: 'dec9f8ee-7c5d-4740-b17c-86331d867b15',
    },
    {
      mutation_effect: {
        description: 'The class I',
        description_uuid: '84e58cf7-a4f0-4cd5-ac01-d8397526d0e7',
        effect: 'Gain-of-function',
        effect_uuid: 'eea2c0e6-d8b0-4536-8df7-297ce756494c',
        oncogenic: 'Yes',
        oncogenic_uuid: 'f2dad6ab-f54c-4252-8d35-54116866d05c',
        short: '',
        pathogenic: '',
        pathogenic_uuid: '688ebc31-f528-4f09-ae3d-ce5b935951ab',
        description_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
        effect_review: { updatedBy: 'John Doe', updateTime: 1678309000000 },
        oncogenic_review: { updatedBy: 'John Doe', updateTime: 1678309000000 },
      },
      mutation_effect_uuid: '3ef57442-f50e-4305-adc6-22fbce9a532d',
      mutation_effect_comments: [],
      name: 'V600E',
      alterations: [],
      alterations_uuid: '9eb7261b-74c8-463b-99cd-62815c416765',
      name_uuid: 'ee5900b8-d984-49a6-b6db-940eb1d0e807',
      summary: 'summary',
      summary_uuid: '8cbccd95-caf6-4a33-837d-5c72d1d221d7',
      tumors: [
        {
          TIs: [
            {
              name: 'Standard implications for sensitivity to therapy',
              name_uuid: 'b728d209-492b-41cd-aaa5-a16c61a770ed',
              treatments: [
                {
                  description: 'RAF inhibitor',
                  description_uuid: 'd9c0bb27-9c2e-441a-abf3-9f0784943e1f',
                  indication: 'FDA-approved',
                  indication_uuid: '6e5d7e6b-9fa6-442c-822b-863942e3ad34',
                  level: '1',
                  level_uuid: '16d4d15a-d753-482c-ac56-74e9bd238ed1',
                  fdaLevel: 'Fda2',
                  fdaLevel_uuid: '3cc835a2-523a-44ef-b703-2d9566c65717',
                  name: [
                    [
                      {
                        description: '',
                        drugName: 'MDM2 Antagonist RO5045337',
                        ncitCode: 'C91724',
                        ncitName: 'MDM2 Antagonist RO5045337',
                        synonyms: ['R7112', 'RO-5045337', 'RO5045337'],
                        uuid: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de',
                        priority: 1,
                      },
                      {
                        description: '',
                        drugName: 'Encorafenib',
                        ncitCode: 'C98283',
                        ncitName: 'Encorafenib',
                        synonyms: ['LGX-818', 'LGX818', 'LGX 818', 'ENCORAFENIB', 'Braftovi'],
                        uuid: '001e534f-3e63-432f-90a6-d1af1759e4e2',
                        priority: 1,
                      },
                    ],
                    [
                      {
                        description: '',
                        drugName: 'Ponatinib',
                        ncitCode: 'C95777',
                        ncitName: 'Ponatinib',
                        synonyms: [
                          'PONATINIB',
                          'AP-24534',
                          'AP24534',
                          'Benzamide, 3-(2-Imidazo(1,2-B)Pyridazin-3-Ylethynyl)-4-Methyl-N-(4-((4-Methyl-1- Piperazinyl)Methyl)-3-(Trifluoromethyl)Phenyl)',
                        ],
                        uuid: '122b8921-3cd6-4b57-bdc8-5d39cc5465a1',
                        priority: 1,
                      },
                    ],
                  ],
                  name_comments: [],
                  name_uuid: '9b798839-592a-4cb0-a85a-099c2662c8ef',
                  propagation: '3B',
                  propagationLiquid: 'no',
                  propagationLiquid_uuid: '6f1085c4-98b6-4d91-a210-b9f078849bbf',
                  propagation_uuid: 'be009470-ca82-47d3-9054-8b54701030cc',
                  excludedRCTs: [],
                  excludedRCTs_uuid: '4fc7b249-8ae1-49d4-864e-4fdf971e1a6c',
                  short: 'Effective against brain metastases',
                  description_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  fdaLevel_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  indication_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  level_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  name_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  propagation_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                },
                {
                  description: 'description review',
                  description_uuid: '45a0d045-43fd-47db-a0a9-1a86d65799c3',
                  indication: 'indication Review',
                  indication_uuid: '494cda87-150c-47e9-980c-6ce6409e0ed7',
                  level: 'level Review',
                  level_uuid: '8876d3de-9e1,e-4d76-9909-3d6f1c30650c',
                  fdaLevel: 'fdaLevel review',
                  fdaLevel_uuid: 'b05a26bf-c45a-4541-8007-197ecc2403a5',
                  name: [
                    [
                      {
                        description: '',
                        drugName: 'MDM2 Antagonist RO5045337',
                        ncitCode: 'C91724',
                        ncitName: 'MDM2 Antagonist RO5045337',
                        synonyms: ['R7112', 'RO-5045337', 'RO5045337'],
                        uuid: '0ade496c-77e6-45cd-8e96-7c7d87b4e5de',
                        priority: 1,
                      },
                    ],
                    [
                      {
                        description: '',
                        drugName: 'Ponatinib',
                        ncitCode: 'C95777',
                        ncitName: 'Ponatinib',
                        synonyms: [
                          'PONATINIB',
                          'AP-24534',
                          'AP24534',
                          'Benzamide, 3-(2-Imidazo(1,2-B)Pyridazin-3-Ylethynyl)-4-Methyl-N-(4-((4-Methyl-1- Piperazinyl)Methyl)-3-(Trifluoromethyl)Phenyl)',
                        ],
                        uuid: '122b8921-3cd6-4b57-bdc8-5d39cc5465a1',
                        priority: 1,
                      },
                    ],
                  ],
                  name_comments: [],
                  name_uuid: '71cc9b4d-a636-4891-8d5d-56093a701280',
                  propagation: '1',
                  propagationLiquid: 'no',
                  propagationLiquid_uuid: '288e2f8e-2dd4-4771-ba8e-c63589640559',
                  propagation_uuid: '317bd394-7991-499e-a6a7-bcd415f821f6',
                  excludedRCTs: [],
                  excludedRCTs_uuid: '3a04990a-9b1f-4ceb-8896-4fd88ea2a02b',
                  short: '',
                  description_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  fdaLevel_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  indication_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  level_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                  name_review: {
                    updatedBy: 'John Doe',
                    updateTime: 1717770480000,
                  },
                  propagation_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
                },
              ],
              treatments_uuid: '6f8ed079-3b8b-437c-852c-c3c2a3c9a320',
              type: 'SS',
            },
            {
              name: 'Standard implications for resistance to therapy',
              name_uuid: '389ba0a6-26d4-4754-aa0f-190d4f72b177',
              treatments: [],
              treatments_uuid: 'bc650bb2-65e7-4ca9-9b04-bc7961d8b135',
              type: 'SR',
            },
            {
              name: 'Investigational implications for sensitivity to therapy',
              name_uuid: '11d78588-9550-488a-a850-dd91e8614048',
              treatments: [],
              treatments_uuid: '92b55ca1-8ef8-44d7-aa90-f10e6c1f7bb0',
              type: 'IS',
            },
            {
              name: 'Investigational implications for resistance to therapy',
              name_uuid: '748852c0-a8ec-4824-af73-aa698bb5ff2f',
              treatments: [],
              treatments_uuid: '52878ba2-b2ba-4f20-b357-f8d5ac1eda2e',
              type: 'IR',
            },
          ],
          cancerTypes: [{ code: 'MEL', mainType: 'Melanoma', subtype: 'Melanoma' }],
          cancerTypes_uuid: '553284ea-01f2-48c4-936c-2efae797d6f5',
          cancerTypes_comments: [],
          excludedCancerTypes_uuid: '2b0384c4-5405-4478-bba8-0604bd0ef1b6',
          diagnostic: {
            description: 'description review',
            description_uuid: '5c0856a1-1a56-4f01-8620-9518ebfb233e',
            level: 'level review',
            level_uuid: '7afcbe32-1684-436e-b659-c37ada75bae2',
            excludedRCTs: [],
            excludedRCTs_uuid: '4a5ed610-72d6-4007-b68b-3913d9c01d38',
            short: '',
            description_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
            level_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
            excludedRCTs_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
          },
          diagnosticSummary: 'summary review',
          diagnosticSummary_uuid: 'a601e863-3c0f-4c97-8037-b3aafd853aad',
          diagnostic_comments: [],
          diagnostic_uuid: 'c3d5a2d6-34ef-4645-9d8e-96739e4a3cd6',
          excludedCancerTypes: [],
          prognostic: {
            description: 'description review',
            description_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
            description_uuid: 'b190d68a-bd23-47e8-a7e7-b67f91c946dd',
            level: 'level review',
            level_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
            level_uuid: 'b12042a4-76c5-4029-97de-9722108b7b0e',
            short: '',
            excludedRCTs_uuid: '1cf4d012-1335-4229-8da1-76ced0819211',
            excludedRCTs_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
            excludedRCTs: [],
          },
          prognosticSummary: 'summary review',
          prognosticSummary_uuid: 'c961a5e9-8c02-4b32-b001-9fc37f6c60c8',
          prognostic_comments: [],
          prognostic_uuid: 'a482d71c-0079-40bd-8d8b-a13d35e26fe3',
          summary: 'summary review',
          summary_uuid: 'da67dbc0-7641-43db-a760-a3464e65a1c5',
          diagnosticSummary_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
          prognosticSummary_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
          summary_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
        },
      ],
      tumors_uuid: 'b9e062b0-a1ae-46ad-9fc6-5bb6ee6b3674',
      mutation_specific_penetrance: {
        penetrance: '',
        penetrance_uuid: '91308253-0677-44db-bf89-97d79d7ec98a',
        description: '',
        description_uuid: 'b0a9729d-82b6-4f3a-ae5f-81a42c004f2f',
      },
      mutation_specific_inheritance_mechanism: {
        inheritanceMechanism: '',
        inheritanceMechanism_uuid: '65c4e130-703e-46b5-85a5-5bf751d630c1',
        description: '',
        description_uuid: '317a7a9e-b50f-4558-aadd-6a7a184e0f0b',
      },
      mutation_specific_cancer_risk: {
        monoallelic: '',
        monoallelic_uuid: '3d379ae4-eea1-47ba-a12c-b3f4cae4f78a',
        biallelic: '',
        biallelic_uuid: 'a0cf2c62-9e86-4cc6-accf-7d4b6dbc5fbc',
        mosaic: '',
        mosaic_uuid: '72e419cb-0d5e-4533-83cc-14c08df2a869',
      },
      name_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
    },
  ],
  mutations_uuid: '69e454db-db99-4979-a770-482f7937314b',
  summary: 'test',
  summary_uuid: '616d02ba-6909-42b2-b145-f7b5627ad0a3',
  penetrance: '',
  penetrance_uuid: 'fc7ae593-7075-42de-b90f-ee132238274b',
  penetrance_comments: [],
  inheritanceMechanism: '',
  inheritanceMechanism_uuid: '99447f53-5908-4dd1-a6fd-732d5ccf0f62',
  inheritanceMechanism_comments: [],
  type: {
    ocg: 'Tumor Suppressor',
    ocg_uuid: '1a233927-54d7-4921-97bf-08489a1e9c7d',
    tsg: 'Oncogene',
    tsg_uuid: 'aafdb835-106b-426a-89dc-970f49f7eee6',
    ocg_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
    tsg_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
    insufficient_evidence: '',
    insufficient_evidence_uuid: '76b1f763-5121-4283-adb1-78104fc74cf3',
    neither: '',
    neither_uuid: '6991a199-30bf-4cad-99b1-acbd4d795aa6',
  },
  type_uuid: 'ea4d7bd1-bc94-4877-987f-37f2f13e571b',
  dmp_refseq_id_grch38: 'NM_000000.0',
  isoform_override_grch38: 'ENST00000000000',
  genomic_indicators: [],
  background_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
  summary_review: { updatedBy: 'John Doe', updateTime: 1717770480000 },
};
